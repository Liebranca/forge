#!/usr/bin/perl
#
# because dhex ties bytes per line
# to terminal size. what the fuck?
#
# you guys think that's cute or sth?!
#
# ---   *   ---   *   ---
# deps

  use v5.36.0;
  use strict;
  use warnings;

  use English qw(-no_match_vars);

  use lib $ENV{'ARPATH'}.'/lib/sys/';

  use Style;
  use Arstd::IO;

# ---   *   ---   *   ---

my ($src)=@ARGV;
my $body=orc($src);

while(length $body) {

  my $line=substr $body,0,16,$NULLSTR;

  my ($i,$j,$h)=(0,0,0);
  my $sl=$NULLSTR;
  my $sr=$NULLSTR;

  my @bytes=split $NULLSTR,$line;
  if(@bytes<16) {
    my $diff=16-@bytes;
    push @bytes,("\x{00}")x$diff;

  };

  for my $b(@bytes) {

    my $x=ord($b);
    $sl.=sprintf "%02X",$x;

    if($x<0x7E && 0x20<$x) {
      $sr.=chr($x);

    } else {
      $sr.='.';

    };

    $i++;$j++;$h++;
    if($i>3) {$i=0;$sl.=' '};

    if($h>15) {$j=$h=0}
    elsif($j>7) {$j=0;$sl.=' : '}

  };

  say $sl.q{ | }.$sr;

};

# ---   *   ---   *   ---
1; # ret
